<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Presión arterial — Adolescentes 10–17 (p90)</title>
  <style>
    :root { --ok: #0a7a28; --bad: #b00020; --muted: #6b7280; --bg:#f8fafc; }
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; line-height:1.4; background:var(--bg); margin:0;}
    header{padding:20px 16px; background:white; box-shadow:0 1px 6px rgba(0,0,0,.06);}
    h1{font-size:20px; margin:0 0 4px 0}
    .wrap{max-width:880px; margin:20px auto; padding:0 16px;}
    form{display:grid; grid-template-columns: repeat(6, minmax(120px,1fr)); gap:12px; background:white; padding:16px; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,.05)}
    label{font-size:12px; color:#374151; display:block; margin:0 0 4px;}
    select,input{width:100%; padding:10px 12px; border:1px solid #d1d5db; border-radius:10px; font-size:14px;}
    .full{grid-column:1/-1}
    .result{margin-top:16px; display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .card{background:white; border-radius:12px; padding:14px; border:1px solid #e5e7eb}
    .muted{color:var(--muted); font-size:13px}
    .pill{display:inline-block; padding:4px 10px; border-radius:999px; font-weight:600;}
    .ok{color:var(--ok); border:1px solid #b8e6c7; background:#e8f9ee}
    .bad{color:var(--bad); border:1px solid #f3b7c0; background:#fdecef}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
    footer{color:#4b5563; font-size:12px; margin:12px 0 32px}
    @media (max-width: 760px){ form{grid-template-columns: 1fr 1fr}; .result{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <h1>Clasificador de presión arterial — Adolescentes (10–17 años)</h1>
    <div class="muted">Regla: <strong>Normal</strong> si sistólica <em>y</em> diastólica están por <u>debajo</u> del <b>percentil 90</b>. <strong>Anormal</strong> si sistólica <em>o</em> diastólica están <u>al menos en</u> el percentil 90.</div>
  </header>

  <div class="wrap">
    <form id="form">
      <div>
        <label for="edad">Edad (años)</label>
        <select id="edad">
          <option value="">—</option>
        </select>
      </div>
      <div>
        <label for="sexo">Sexo</label>
        <select id="sexo">
          <option value="">—</option>
          <option value="F">Mujer</option>
          <option value="M">Hombre</option>
        </select>
      </div>
      <div>
        <label for="ptile">Percentil de talla</label>
        <select id="ptile">
          <option value="">—</option>
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="75">75</option>
          <option value="90">90</option>
          <option value="95">95</option>
        </select>
      </div>
      <div>
        <label for="sis">PA Sistólica (mmHg)</label>
        <input id="sis" type="number" min="60" max="220" step="1" placeholder="p. ej. 118" />
      </div>
      <div>
        <label for="dia">PA Diastólica (mmHg)</label>
        <input id="dia" type="number" min="30" max="140" step="1" placeholder="p. ej. 76" />
      </div>
      <div class="full muted">Los puntos de corte provienen de las tablas oficiales (percentil 90 por edad, sexo y percentil de talla). Fuente: Orientaciones técnicas 2021 – Anexos 11 y 12.</div>
    </form>

    <div class="result">
      <div class="card">
        <div class="muted">Umbral P90 usado (mmHg)</div>
        <div id="umbral" class="mono" style="font-size:16px; margin-top:6px">—</div>
      </div>
      <div class="card">
        <div class="muted">Resultado</div>
        <div id="out" style="font-size:16px; margin-top:6px">Complete todos los campos…</div>
      </div>
    </div>

    <footer>
      <p>Nota: herramienta de apoyo, no diagnóstico. Confirme mediciones y criterios clínicos.</p>
    </footer>
  </div>

  <script>
    const PERCENTILES = [5,10,25,50,75,90,95];

    const P90 = {
      F: {
        10: { sys:[109,110,111,112,113,115,113], dia:[72,73,73,73,73,73,73] },
        11: { sys:[111,112,113,114,116,118,120], dia:[74,74,74,74,74,75,75] },
        12: { sys:[114,115,116,118,120,122,122], dia:[75,75,75,75,76,76,76] },
        13: { sys:[116,117,119,121,122,123,123], dia:[75,75,75,76,76,76,76] },
        14: { sys:[118,118,120,122,123,123,123], dia:[76,76,76,76,77,77,77] },
        15: { sys:[118,119,121,122,123,123,124], dia:[76,76,76,77,77,78,78] },
        16: { sys:[119,120,122,123,124,124,124], dia:[76,76,76,77,78,78,78] },
        17: { sys:[120,121,123,124,124,125,125], dia:[76,76,77,77,78,78,78] },
      },
      M: {
        10: { sys:[108,109,111,112,113,115,116], dia:[72,73,74,74,75,75,76] },
        11: { sys:[110,111,112,114,116,117,118], dia:[74,74,75,75,75,76,76] },
        12: { sys:[113,114,115,117,119,121,122], dia:[75,75,75,75,75,76,76] },
        13: { sys:[115,116,118,121,124,126,126], dia:[74,74,74,75,76,77,77] },
        14: { sys:[119,120,123,126,127,128,129], dia:[74,74,75,77,78,79,80] },
        15: { sys:[123,124,126,128,129,130,130], dia:[75,76,78,79,80,81,81] },
        16: { sys:[126,127,128,129,131,131,132], dia:[77,78,79,80,81,82,82] },
        17: { sys:[128,129,130,131,132,133,134], dia:[78,79,80,81,82,82,83] },
      }
    };

    const edadSel = document.getElementById('edad');
    const sexoSel = document.getElementById('sexo');
    const ptSel = document.getElementById('ptile');
    const sisInp = document.getElementById('sis');
    const diaInp = document.getElementById('dia');
    const out = document.getElementById('out');
    const umbral = document.getElementById('umbral');

    // Rellenar edades 10–17
    for(let a=10;a<=17;a++){
      const opt = document.createElement('option');
      opt.value = String(a);
      opt.textContent = String(a);
      edadSel.appendChild(opt);
    }

    const inputs = [edadSel, sexoSel, ptSel, sisInp, diaInp];
    inputs.forEach(el => el.addEventListener('input', update));
    inputs.forEach(el => el.addEventListener('change', update));

    function update(){
      const edad = parseInt(edadSel.value, 10);
      const sexo = sexoSel.value; // 'F' | 'M'
      const pt = parseInt(ptSel.value, 10);
      const sis = parseInt(sisInp.value, 10);
      const dia = parseInt(diaInp.value, 10);

      if(!edad || !sexo || !pt || isNaN(sis) || isNaN(dia)){
        out.innerHTML = 'Complete todos los campos…';
        out.className = '';
        umbral.textContent = '—';
        return;
      }

      const idx = PERCENTILES.indexOf(pt);
      const ref = P90[sexo][edad];
      const sys90 = ref.sys[idx];
      const dia90 = ref.dia[idx];
      umbral.textContent = `Sistólica ≥ ${sys90} o Diastólica ≥ ${dia90}`;

      const anormal = (sis >= sys90) || (dia >= dia90);
      if(anormal){
        out.innerHTML = `<span class="pill bad">ANORMAL</span> — Sistólica ${sis} / Diastólica ${dia} mmHg`;
      } else {
        out.innerHTML = `<span class=\"pill ok\">NORMAL</span> — Sistólica ${sis} / Diastólica ${dia} mmHg`;
      }
    }
  </script>
</body>
</html>
